<% const title = 'Dashboard'; %>

<div class="card">
    <h2>
        <% if (user.userType === 'mess_owner') { %>
            Mess Owner Dashboard
        <% } else { %>
            Hospital Dashboard
        <% } %>
    </h2>
    
    <div class="welcome-message">
        <% if (user.userType === 'mess_owner') { %>
            <p>Welcome, <strong><%= user.full_name %></strong>! You have full administrative access to manage the mess operations.</p>
        <% } else { %>
            <p>Welcome, <strong><%= user.full_name %></strong>! You are logged in as <strong><%= user.role %></strong> staff.</p>
        <% } %>
    </div>
</div>

<div class="card">
	<h2>Orders</h2>
	<table>
		<thead>
			<tr>
				<th>ID</th>
				<th>Patient</th>
				<th>Room</th>
				<th>Dietary / Allergies</th>
				<th>Item</th>
				<th>Status</th>
				<th>Created</th>
			</tr>
		</thead>
		<tbody>
			<% orders.forEach(o => { %>
			<tr>
				<td><%= o.id %></td>
				<td><%= o.patient_name %></td>
				<td><%= o.room_number || '' %></td>
				<td><%= (o.dietary_restrictions || '') %><% if (o.allergies) { %> / <strong><%= o.allergies %></strong><% } %></td>
				<td><%= o.item_name %></td>
				<td><%= o.status %></td>
				<td><%= dayjs(o.created_at).format('YYYY-MM-DD HH:mm') %></td>
			</tr>
			<% }) %>
		</tbody>
	</table>
</div>
