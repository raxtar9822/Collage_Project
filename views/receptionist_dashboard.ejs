<div class="page-header">
	<h1>üè• Receptionist Dashboard</h1>
	<p>Manage daily tiffin orders for patients</p>
</div>

<div class="dashboard-stats">
	<div class="stat-card">
		<div class="stat-number"><%= orders.filter(o => o.status === 'pending').length %></div>
		<div class="stat-label">Pending Orders</div>
	</div>
	<div class="stat-card">
		<div class="stat-number"><%= orders.filter(o => o.status === 'confirmed').length %></div>
		<div class="stat-label">Confirmed</div>
	</div>
	<div class="stat-card">
		<div class="stat-number"><%= orders.filter(o => o.status === 'delivered').length %></div>
		<div class="stat-label">Delivered</div>
	</div>
	<div class="stat-card">
		<div class="stat-number"><%= orders.length %></div>
		<div class="stat-label">Total Orders</div>
	</div>
</div>

<div class="action-bar">
	<a href="/receptionist/tiffin-orders/new" class="btn btn-primary">+ New Tiffin Order</a>
	<a href="/receptionist/tiffin-orders" class="btn btn-secondary">View All Orders</a>
</div>

<div class="filters">
	<form method="get" action="/dashboard" class="filter-form">
		<select name="status" onchange="this.form.submit()">
			<option value="">All Status</option>
			<option value="pending" <%= filter.status === 'pending' ? 'selected' : '' %>>Pending</option>
			<option value="confirmed" <%= filter.status === 'confirmed' ? 'selected' : '' %>>Confirmed</option>
			<option value="preparing" <%= filter.status === 'preparing' ? 'selected' : '' %>>Preparing</option>
			<option value="ready" <%= filter.status === 'ready' ? 'selected' : '' %>>Ready</option>
			<option value="delivered" <%= filter.status === 'delivered' ? 'selected' : '' %>>Delivered</option>
			<option value="cancelled" <%= filter.status === 'cancelled' ? 'selected' : '' %>>Cancelled</option>
		</select>
		
		<select name="ward" onchange="this.form.submit()">
			<option value="">All Wards</option>
			<option value="Ward A" <%= filter.ward === 'Ward A' ? 'selected' : '' %>>Ward A</option>
			<option value="Ward B" <%= filter.ward === 'Ward B' ? 'selected' : '' %>>Ward B</option>
			<option value="Ward C" <%= filter.ward === 'Ward C' ? 'selected' : '' %>>Ward C</option>
			<option value="ICU" <%= filter.ward === 'ICU' ? 'selected' : '' %>>ICU</option>
		</select>
		
		<input type="date" name="orderDate" value="<%= filter.orderDate || '' %>" onchange="this.form.submit()" placeholder="Filter by date">
	</form>
</div>

<div class="orders-section">
	<h2>Recent Tiffin Orders</h2>
	<% if (orders.length === 0) { %>
		<div class="empty-state">
			<p>No tiffin orders found. <a href="/receptionist/tiffin-orders/new">Create your first order</a></p>
		</div>
	<% } else { %>
		<div class="orders-grid">
			<% orders.slice(0, 10).forEach(order => { %>
				<div class="order-card">
					<div class="order-header">
						<h3><%= order.patient_name %></h3>
						<span class="status-badge status-<%= order.status %>"><%= order.status %></span>
					</div>
					<div class="order-details">
						<p><strong>Ward:</strong> <%= order.ward %></p>
						<p><strong>Food Type:</strong> <%= order.food_type %></p>
						<p><strong>Quantity:</strong> <%= order.quantity %></p>
						<p><strong>Order Date:</strong> <%= dayjs(order.order_date).format('MMM DD, YYYY') %></p>
						<% if (order.notes) { %>
							<p><strong>Notes:</strong> <%= order.notes %></p>
						<% } %>
						<p><strong>Created:</strong> <%= dayjs(order.created_at).format('MMM DD, YYYY HH:mm') %></p>
					</div>
					<div class="order-actions">
						<a href="/receptionist/tiffin-orders/<%= order.id %>/edit" class="btn btn-sm btn-secondary">Edit</a>
						<form method="post" action="/receptionist/tiffin-orders/<%= order.id %>/delete" style="display:inline" onsubmit="return confirm('Are you sure you want to delete this order?')">
							<button type="submit" class="btn btn-sm btn-danger">Delete</button>
						</form>
					</div>
				</div>
			<% }) %>
		</div>
	<% } %>
</div>

<style>
.dashboard-stats {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
	gap: 1rem;
	margin-bottom: 2rem;
}

.stat-card {
	background: #f8f9fa;
	border: 1px solid #e9ecef;
	border-radius: 8px;
	padding: 1.5rem;
	text-align: center;
}

.stat-number {
	font-size: 2rem;
	font-weight: bold;
	color: #007bff;
	margin-bottom: 0.5rem;
}

.stat-label {
	color: #6c757d;
	font-size: 0.9rem;
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.action-bar {
	display: flex;
	gap: 1rem;
	margin-bottom: 2rem;
}

.filters {
	background: #f8f9fa;
	padding: 1rem;
	border-radius: 8px;
	margin-bottom: 2rem;
}

.filter-form {
	display: flex;
	gap: 1rem;
	align-items: center;
}

.filter-form select,
.filter-form input {
	padding: 0.5rem;
	border: 1px solid #ced4da;
	border-radius: 4px;
}

.orders-grid {
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
	gap: 1rem;
}

.order-card {
	background: white;
	border: 1px solid #e9ecef;
	border-radius: 8px;
	padding: 1rem;
	box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.order-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 1rem;
}

.order-header h3 {
	margin: 0;
	color: #333;
}

.status-badge {
	padding: 0.25rem 0.5rem;
	border-radius: 4px;
	font-size: 0.8rem;
	font-weight: bold;
	text-transform: uppercase;
}

.status-pending { background: #fff3cd; color: #856404; }
.status-confirmed { background: #d1ecf1; color: #0c5460; }
.status-preparing { background: #f8d7da; color: #721c24; }
.status-ready { background: #d4edda; color: #155724; }
.status-delivered { background: #d1ecf1; color: #0c5460; }
.status-cancelled { background: #f8d7da; color: #721c24; }

.order-details p {
	margin: 0.5rem 0;
	color: #666;
}

.order-actions {
	display: flex;
	gap: 0.5rem;
	margin-top: 1rem;
	padding-top: 1rem;
	border-top: 1px solid #e9ecef;
}

.empty-state {
	text-align: center;
	padding: 3rem;
	color: #6c757d;
}

.empty-state a {
	color: #007bff;
	text-decoration: none;
}

.empty-state a:hover {
	text-decoration: underline;
}
</style>


